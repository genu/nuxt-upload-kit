---
title: Events
description: Listen to upload lifecycle events for full control over the upload process.
---

# Events

Nuxt Upload Kit provides a comprehensive event system that lets you react to every stage of the upload lifecycle.

## Listening to Events

Use the `on` method to subscribe to events:

```ts
const uploader = useUploadManager()

uploader.on('file:added', (file) => {
  console.log('File added:', file.name)
})

uploader.on('upload:complete', (files) => {
  console.log('Upload complete:', files.length, 'files')
})
```

## Core Events

### File Events

#### `file:added`

Fired when a file is successfully added (after validation and preprocessing).

```ts
uploader.on('file:added', (file: UploadFile) => {
  console.log('Added:', file.name, file.preview)
})
```

#### `file:removed`

Fired when a file is removed.

```ts
uploader.on('file:removed', (file: UploadFile) => {
  console.log('Removed:', file.name)
})
```

#### `file:replaced`

Fired when a file's data is replaced (e.g., after editing/cropping).

```ts
uploader.on('file:replaced', (file: UploadFile) => {
  console.log('Replaced:', file.name, 'New size:', file.size)
})
```

#### `file:processing`

Fired when a file enters the processing stage.

```ts
uploader.on('file:processing', (file: UploadFile) => {
  console.log('Processing:', file.name)
})
```

#### `file:error`

Fired when a file encounters an error during validation, processing, or upload.

```ts
uploader.on('file:error', ({ file, error }) => {
  console.error('Error with', file.name, ':', error.message)

  // Show user-friendly message
  toast.error(`Failed to upload ${file.name}: ${error.message}`)
})
```

### Upload Events

#### `upload:start`

Fired when the upload process begins.

```ts
uploader.on('upload:start', (files: UploadFile[]) => {
  console.log('Starting upload of', files.length, 'files')
  showLoadingIndicator()
})
```

#### `upload:progress`

Fired when an individual file's upload progress updates.

```ts
uploader.on('upload:progress', ({ file, progress }) => {
  console.log(file.name, 'progress:', progress, '%')
})
```

#### `upload:complete`

Fired when all uploads are complete.

```ts
uploader.on('upload:complete', (files: UploadFile[]) => {
  console.log('All uploads complete!')
  hideLoadingIndicator()

  // Access upload results
  files.forEach(file => {
    console.log(file.name, '->', file.remoteUrl)
  })
})
```

#### `upload:error`

Fired on upload errors.

```ts
uploader.on('upload:error', (error: FileError) => {
  console.error('Upload error:', error.message)
})
```

### Reorder Events

#### `files:reorder`

Fired when files are reordered.

```ts
uploader.on('files:reorder', ({ oldIndex, newIndex }) => {
  console.log('File moved from', oldIndex, 'to', newIndex)
})
```

## Plugin Events

Plugins can emit their own events, automatically prefixed with the plugin ID.

### Image Compressor Events

```ts
// Compression started
uploader.on('image-compressor:start', ({ file, originalSize }) => {
  console.log('Compressing', file.name, 'from', originalSize, 'bytes')
})

// Compression completed
uploader.on('image-compressor:complete', ({ file, originalSize, compressedSize, savedBytes }) => {
  console.log('Compressed', file.name)
  console.log('Saved', savedBytes, 'bytes', `(${((savedBytes / originalSize) * 100).toFixed(1)}%)`)
})

// Compression skipped
uploader.on('image-compressor:skip', ({ file, reason }) => {
  console.log('Skipped compression for', file.name, ':', reason)
})
```

### Listening to Any Event

You can listen to arbitrary event strings for plugin events:

```ts
// Listen to any string event
uploader.on('my-custom-plugin:custom-event', (data) => {
  console.log('Custom event:', data)
})
```

## Event Types

```ts
// Core events (fully typed)
type UploaderEvents = {
  'file:added': UploadFile
  'file:removed': UploadFile
  'file:replaced': UploadFile
  'file:processing': UploadFile
  'file:error': { file: UploadFile; error: FileError }
  'upload:start': UploadFile[]
  'upload:complete': UploadFile[]
  'upload:error': FileError
  'upload:progress': { file: UploadFile; progress: number }
  'files:reorder': { oldIndex: number; newIndex: number }
}
```

## Practical Examples

### Progress Toast Notifications

```ts
const uploader = useUploadManager()

uploader.on('upload:start', (files) => {
  toast.info(`Uploading ${files.length} file(s)...`)
})

uploader.on('file:error', ({ file, error }) => {
  toast.error(`Failed: ${file.name} - ${error.message}`)
})

uploader.on('upload:complete', (files) => {
  toast.success(`Successfully uploaded ${files.length} file(s)`)
})
```

### Analytics Tracking

```ts
uploader.on('upload:complete', (files) => {
  analytics.track('files_uploaded', {
    count: files.length,
    totalSize: files.reduce((sum, f) => sum + f.size, 0),
    types: [...new Set(files.map(f => f.mimeType))]
  })
})

uploader.on('image-compressor:complete', ({ savedBytes }) => {
  analytics.track('bandwidth_saved', { bytes: savedBytes })
})
```

### Form Integration

```ts
const formData = reactive({
  title: '',
  description: '',
  attachments: [] as string[]
})

uploader.on('upload:complete', (files) => {
  // Update form with uploaded file URLs
  formData.attachments = files
    .filter(f => f.remoteUrl)
    .map(f => f.remoteUrl!)
})

uploader.on('file:removed', (file) => {
  // Remove from form data
  formData.attachments = formData.attachments
    .filter(url => url !== file.remoteUrl)
})
```

### Debug Logging

```ts
if (import.meta.dev) {
  const events = [
    'file:added', 'file:removed', 'file:error',
    'upload:start', 'upload:progress', 'upload:complete'
  ]

  events.forEach(event => {
    uploader.on(event, (data) => {
      console.log(`[Upload] ${event}:`, data)
    })
  })
}
```
