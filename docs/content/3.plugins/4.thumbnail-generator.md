---
title: Thumbnails
description: Generate preview thumbnails for images and videos automatically.
navigation:
  icon: i-lucide-image-plus
---

# Thumbnail Generator

The `PluginThumbnailGenerator` creates preview thumbnails for images and videos, providing instant visual feedback in your UI.

## Usage

```ts
// Via options (recommended)
const uploader = useUploadKit({
  thumbnails: true, // Enable with defaults
})

// With custom options
const uploader = useUploadKit({
  thumbnails: {
    width: 200,
    height: 200,
    quality: 0.8,
  },
})

// Via plugin directly
import { PluginThumbnailGenerator } from "nuxt-upload-kit"

const uploader = useUploadKit({
  plugins: [
    PluginThumbnailGenerator({
      maxWidth: 256,
      maxHeight: 256,
      quality: 0.9,
    }),
  ],
})
```

## Options

| Option             | Type     | Default | Description                         |
| ------------------ | -------- | ------- | ----------------------------------- |
| `maxWidth`         | `number` | `200`   | Maximum thumbnail width             |
| `maxHeight`        | `number` | `200`   | Maximum thumbnail height            |
| `quality`          | `number` | `0.7`   | JPEG quality (0-1)                  |
| `videoCaptureTime` | `number` | `1`     | Seconds into video to capture frame |

## How It Works

### Images

1. Loads the image into memory
2. Calculates dimensions preserving aspect ratio
3. Draws to a canvas at thumbnail size
4. Exports as JPEG data URL

### Videos

1. Loads video metadata
2. Seeks to `videoCaptureTime` (or 10% of duration)
3. Captures the frame
4. Exports as JPEG data URL

## Accessing Thumbnails

After preprocessing, thumbnails are available on `file.preview`:

```vue
<template>
  <div v-for="file in uploader.files" :key="file.id">
    <img v-if="file.preview" :src="file.preview" :alt="file.name" class="thumbnail" />
    <div v-else class="placeholder">No preview</div>
  </div>
</template>
```

## Skipped Files

The generator skips:

- Non-image and non-video files
- GIF files (to avoid showing only first frame)
- SVG files (vector graphics don't need thumbnails)
- Remote files without local data

## Timing

Thumbnails are generated during the **preprocess** stage, immediately after file selection. This means:

- Thumbnails appear instantly in the UI
- No waiting for upload to complete
- Users see previews while files are queued

## Video Thumbnail Timing

Control when to capture the video frame:

```ts
const uploader = useUploadKit({
  thumbnails: {
    videoCaptureTime: 5, // Capture at 5 seconds
  },
})
```

The plugin automatically adjusts if the video is shorter:

- Uses `videoCaptureTime` or 10% of duration, whichever is smaller

## Quality vs Size

Thumbnail data URLs are embedded in the file object. Higher quality means larger strings:

| Quality | Typical Size | Use Case              |
| ------- | ------------ | --------------------- |
| `0.5`   | ~5-10 KB     | Large file lists      |
| `0.7`   | ~10-20 KB    | Default, balanced     |
| `0.9`   | ~20-40 KB    | High quality previews |

## Example: Custom Thumbnail Sizes

```ts
// Small thumbnails for grid view
const uploader = useUploadKit({
  thumbnails: {
    width: 100,
    height: 100,
    quality: 0.6,
  },
})

// Large previews for detail view
const uploader = useUploadKit({
  thumbnails: {
    width: 400,
    height: 400,
    quality: 0.9,
  },
})
```

## Example: Fallback for Non-Image Files

```vue
<template>
  <div v-for="file in uploader.files" :key="file.id" class="file-preview">
    <!-- Image/video preview -->
    <img v-if="file.preview" :src="file.preview" />

    <!-- PDF icon -->
    <div v-else-if="file.mimeType === 'application/pdf'" class="icon">üìÑ</div>

    <!-- Document icon -->
    <div v-else-if="file.mimeType.includes('document')" class="icon">üìù</div>

    <!-- Generic file icon -->
    <div v-else class="icon">üìÅ</div>
  </div>
</template>
```

## After Upload

When a file is uploaded, `file.preview` is automatically updated to use `file.remoteUrl` if no thumbnail was generated. This ensures previews always work:

```ts
// Before upload: file.preview = 'data:image/jpeg;base64,...' (local thumbnail)
// After upload:  file.preview = 'https://storage.com/file.jpg' (or stays as thumbnail)
```

## Memory Management

The plugin automatically:

- Revokes object URLs after use
- Cleans up canvas elements
- Uses efficient data URLs for thumbnails

For very large uploads (100+ files), consider using lower quality thumbnails to reduce memory usage.
